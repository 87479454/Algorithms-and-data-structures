## http1.0、1.1、2.0 协议的区别
### 参考文献
+ [阮一峰http协议入门](http://www.ruanyifeng.com/blog/2016/08/http.html)
#### 前言
+ HTTP 是基于 TCP/IP 协议的应用层协议；它不涉及数据包(packet)传输，主要规定了客户端和服务器之间的通信格式，默认使用80端口。
#### http0.9
+ 只支持一个命令GET
+ 服务器只能返回HTML格式的字符串，不能回应别的格式。
#### http1.0
+ 支持GET、POST、HEAD命令
+ 任何格式的内容都可以发送
  + 文字
  + 图像
  + 视频
  + 二进制文件
+ 每次通信必须包括头信息(HTTP header)
+ 其它新增功能
  + 状态码（status code）
  + 多字符集支持
  + 多部分发送（multi-part type）
  + 权限（authorization）
  + 缓存（cache）
  + 内容编码（content encoding）
+ 缺点
  + 无连接
    + 每个TCP连接只能发送一个请求，浏览器再请求必须再新建一个连接
    + 影响
      + 无法复用连接
        + 网络利用率非常低，每次请求都要三次握手四次挥手(一次tcp连接)
      + 队头阻塞
        + 前一个请求响应之前，后一个请求不能发送，如果阻塞，后面也会阻塞
  + 无状态
    + 服务器不跟踪不记录请求过的状态
    + 改进
      + 可以借助cookie/session机制来做身份认证和状态记录
#### http1.1
+ 引入持久连接
  + 默认不关闭，不用声明Connection:keep-alive
+ 管道机制(pipelining)
  + 在同一个TCP连接里可以发送多个请求
+ 缓存处理
  + 新增字段cache-control
+ 断点传输
  + 上传/下载
  + 在 Header 里两个参数实现的，客户端发请求时对应的是 Range 服务器端响应时对应的是 Content-Range
+ 其它功能
  + PUT
  + PATCH
  + HEAD
  + OPTIONS
  + DELETE
  + 客户端请求头信息增加了Host字段，用来制定服务器的域名
    + 可以将请求发往同一台服务器上的不同网站，为虚拟主机的兴起打下了基础。
+ 缺陷
  + 即使多个请求可以在同一个TCP连接里，但是所有数据通信都是按次序进行的；服务器处理完前一个回应，才会进行下一个回应，依旧会造成队头阻塞
+ 改进
  + 减少请求数
  + 同时多开持久连接
#### http2
+ SPDY协议，谷歌2009年自主研发的主要解决1.1效率不高的问题；在2.0中得到继承
+ 二进制协议
  + 1.1头信息必须是文本(ASCII编码)
  + 2版头信息和数据体都是二进制，统称为桢(frame)
+ 多工(Multiplexing)/多路复用
  + HTTP/2 复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应，这样就避免了"队头堵塞"。
+ 数据流
  + HTTP/2 将每个请求或回应的所有数据包，称为一个数据流（stream）。每个数据流都有一个独一无二的编号。数据包发送的时候，都必须标记数据流ID，用来区分它属于哪个数据流。另外还规定，客户端发出的数据流，ID一律为奇数，服务器发出的，ID为偶数。
  + 客户端还可以指定数据流的优先级。优先级越高，服务器就会越早回应。
+ 头信息压缩
+ 服务器推送
#### 区别纵览
+ 缓存
  + 1.0
    + header:if-Modified-Since/Last-Modefied
      + 使用绝对时间戳，精确到秒
      + 304:Not Modified
    + Expires
    + Pragma:no-cache
  + 1.1
    + Entity tag
    + If-Unmodified-Since
    + If-Match
    + If-None-Match
    + Cache-Control
      + max-age
        + 支持相对时间戳
      + private/no-store
      + no-transform
        + 阻止Proxy进行任何改变响应的行为
+ 长连接
  + 1.0
    + 需要设置keep-alive，且各大浏览器实现有所不同
  + 1.1
    + 默认支持
  + 2
    + 默认支持
+ HOST域、状态码
  + 1.0
    + 不支持、无状态
  + 1.1
    + 支持、新增24个状态码
  + 2
    + 支持、继承
+ 多路复用/首部数据压缩/服务器推送
  + 2
    + 支持